#!/usr/bin/env bash

dir="$HOME/.config/polybar/themes"

launch_bar() {
	# Terminate already running bar instances
	killall -q polybar

	# Wait until the processes have been shut down
	while pgrep -u $UID -x polybar >/dev/null; do sleep 1; done

	if [[ "$zone" == "top" ]]; then
		$top = top
	elif [[ "$zone" == "bottom" ]]; then
		$zone = bottom
	fi 

	# Launch the bar
	if [[ "$style" == "47z1" ]]; then
		polybar -q $zone -c "$dir/47z1.ini" &

	elif [[ "$style" == "pentest" ]]; then
		polybar -q $zone -c "$dir/pentest.ini" &

	elif [[ "$style" == "simple" ]]; then
		polybar -q bottom -c "$dir/simple.ini" &

	elif [[ "$style" == "plasma" ]]; then
		polybar -q left  -c "$dir/plasma.ini" &
		polybar -q right -c "$dir/plasma.ini" &
	else
		echo -ne "\n\n\tbye!\n"
	fi
}

if [[ "$1" == "--47z1" ]]; then
	style="47z1"
	launch_bar

elif [[ "$1" == "--pentest" ]]; then
	style="pentest"
	launch_bar

elif [[ "$1" == "--simple" ]]; then
	style="simple"
	launch_bar

elif [[ "$1" == "--plasma" ]]; then
	style="plasma"
	launch_bar

else
	cat <<- EOF
	Usage : launch --zone --theme

	Available Themes :
		--top, --bottom, --both
	Available Themes :
		--47z1, --pentest, --simple, --plasma
	EOF
fi
